sys ia

1. le monstre "regarde" le joueur (manhtan)
→ il calcule où il est (droite/gauche/haut/bas)
    si le joueur est à droite → diffX > 0
    si le joueur est à gauche → diffX < 0
    si le joueur est en bas → diffY > 0
    si le joueur est en haut → diffY < 0

2. il choisit l’axe où la distance est la plus grande
→ horizontal ou vertical

3. il tente un mouvement d’un seul pas sur cet axe
    ensuite il fait :
        dx = +1 ou -1
        dy = 0
    ou l’inverse, puis :
        nx = mx + dx;
        ny = my + dy;

4. si cet axe est bloqué
    if (!peut_bouger) {
    // annule le move
    dx = 0; dy = 0;

    // tente l’autre axe
    if (abs(diffX) < abs(diffY))
        dx = ...
    else
        dy = ...
    }
→ il tente l’autre axe

5. si encore bloqué
→ il ne bouge pas



sys affichage 

1. l’écran est préparé
→ effacement complet de la console
→ récupération largeur / hauteur de la carte

2. la zone d’affichage de la liste est définie
→ y_liste commence à 2
→ max_visible = hauteur - 7
    si max_visible < 1 → max_visible = 1

3. l’index de scroll est calculé
→ on veut que l’item sélectionné reste visible
→ on calcule index_haut
    si la liste est vide → index_haut = 0
    si on dépasse en haut → index_haut = 0
    si on dépasse en bas → index_haut = taille_liste - max_visible

4. l’état du scroll est mémorisé
→ jeu.inv_scroll_haut = index_haut

5. la liste visible est construite
→ on parcourt max_visible lignes
→ pour chaque ligne :
    index_global = index_haut + i
    si index_global existe :
        on copie l’item dans liste_visible

6. le titre est affiché
→ "INVENTAIRE (T = fermer, ESPACE = utiliser)"
→ centré horizontalement

7. l’en-tête du tableau est affiché
→ "| nom | utilises | restants |"

8. les items visibles sont affichés
→ pour chaque item visible :
    → on cherche sa configuration (cfg_items)
    → si trouvée :
        - format du nom (underscore → espace)
        - coupe si trop long
        - vérifie si l’item est sélectionné
            si oui → affiche ">"
            sinon → affiche " "
        - affiche :
            nom
            x utilises
            x restants

9. une ligne vide est ajoutée
→ séparation visuelle entre liste et détails

10. les détails de l’item sélectionné sont affichés
→ seulement si l’inventaire n’est pas vide
→ on récupère l’item sélectionné
→ on cherche sa configuration

11. si la configuration est trouvée
→ affichage :
    "details :"
    nom de l’objet
    description (coupée à la largeur)

12. les statistiques sont affichées
→ pour chaque stat :
    nom_stat + " : "
    si bonus >= 0 → "+"
    valeur du bonus





le monstre vérifie s’il est actif et vivant
→ sinon il est ignoré

il calcule la distance au joueur (Manhattan)

si le joueur est proche (mode aggro)
→ distance ≤ portée

s’il est adjacent
→ il attaque le joueur

sinon il se déplace vers le joueur
→ il regarde où est le joueur (diffX / diffY)

il choisit l’axe le plus éloigné
→ horizontal ou vertical

il tente un pas sur cet axe

si bloqué
→ il tente l’autre axe

si encore bloqué
→ il ne bouge pas

si le joueur est loin (mode balade)
→ déplacement aléatoire ou immobile